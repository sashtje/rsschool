(()=>{var e={211:function(e,t){!function(e){"use strict";function t(e){return"object"==typeof e&&"function"==typeof e.to}function r(e){e.parentElement.removeChild(e)}function n(e){return null!=e}function o(e){e.preventDefault()}function i(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function s(e,t,r){r>0&&(h(e,t),setTimeout((function(){u(e,t)}),r))}function a(e){return Math.max(Math.min(e,100),0)}function l(e){return Array.isArray(e)?e:[e]}function c(e){var t=(e=String(e)).split(".");return t.length>1?t[1].length:0}function h(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function u(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function d(e){var t=void 0!==window.pageXOffset,r="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:r?e.documentElement.scrollLeft:e.body.scrollLeft,y:t?window.pageYOffset:r?e.documentElement.scrollTop:e.body.scrollTop}}function m(e,t){return 100/(t-e)}function p(e,t,r){return 100*t/(e[r+1]-e[r])}function g(e,t){for(var r=1;e>=t[r];)r+=1;return r}function f(e,t,r){if(r>=e.slice(-1)[0])return 100;var n=g(r,e),o=e[n-1],i=e[n],s=t[n-1],a=t[n];return s+function(e,t){return p(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}([o,i],r)/m(s,a)}function y(e,t,r,n){if(100===n)return n;var o=g(n,e),i=e[o-1],s=e[o];return r?n-i>(s-i)/2?s:i:t[o-1]?e[o-1]+function(e,t){return Math.round(e/t)*t}(n-e[o-1],t[o-1]):n}var v,S;e.PipsMode=void 0,(S=e.PipsMode||(e.PipsMode={})).Range="range",S.Steps="steps",S.Positions="positions",S.Count="count",S.Values="values",e.PipsType=void 0,(v=e.PipsType||(e.PipsType={}))[v.None=-1]="None",v[v.NoValue=0]="NoValue",v[v.LargeValue=1]="LargeValue",v[v.SmallValue=2]="SmallValue";var b=function(){function e(e,t,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.snap=t;var o=[];for(Object.keys(e).forEach((function(t){o.push([l(e[t]),t])})),o.sort((function(e,t){return e[0][0]-t[0][0]})),n=0;n<o.length;n++)this.handleEntryPoint(o[n][1],o[n][0]);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)this.handleStepPoint(n,this.xNumSteps[n])}return e.prototype.getDistance=function(e){for(var t=[],r=0;r<this.xNumSteps.length-1;r++)t[r]=p(this.xVal,e,r);return t},e.prototype.getAbsoluteDistance=function(e,t,r){var n,o=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[o+1];)o++;else e===this.xPct[this.xPct.length-1]&&(o=this.xPct.length-2);r||e!==this.xPct[o+1]||o++,null===t&&(t=[]);var i=1,s=t[o],a=0,l=0,c=0,h=0;for(n=r?(e-this.xPct[o])/(this.xPct[o+1]-this.xPct[o]):(this.xPct[o+1]-e)/(this.xPct[o+1]-this.xPct[o]);s>0;)a=this.xPct[o+1+h]-this.xPct[o+h],t[o+h]*i+100-100*n>100?(l=a*n,i=(s-100*n)/t[o+h],n=1):(l=t[o+h]*a/100*i,i=0),r?(c-=l,this.xPct.length+h>=1&&h--):(c+=l,this.xPct.length-h>=1&&h++),s=t[o+h]*i;return e+c},e.prototype.toStepping=function(e){return f(this.xVal,this.xPct,e)},e.prototype.fromStepping=function(e){return function(e,t,r){if(r>=100)return e.slice(-1)[0];var n=g(r,t),o=e[n-1],i=e[n],s=t[n-1];return function(e,t){return t*(e[1]-e[0])/100+e[0]}([o,i],(r-s)*m(s,t[n]))}(this.xVal,this.xPct,e)},e.prototype.getStep=function(e){return y(this.xPct,this.xSteps,this.snap,e)},e.prototype.getDefaultStep=function(e,t,r){var n=g(e,this.xPct);return(100===e||t&&e===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},e.prototype.getNearbySteps=function(e){var t=g(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},e.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(c);return Math.max.apply(null,e)},e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},e.prototype.convert=function(e){return this.getStep(this.toStepping(e))},e.prototype.handleEntryPoint=function(e,t){var r;if(!i(r="min"===e?0:"max"===e?100:parseFloat(e))||!i(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(r),this.xVal.push(t[0]);var n=Number(t[1]);r?this.xSteps.push(!isNaN(n)&&n):isNaN(n)||(this.xSteps[0]=n),this.xHighestCompleteStep.push(0)},e.prototype.handleStepPoint=function(e,t){if(t)if(this.xVal[e]!==this.xVal[e+1]){this.xSteps[e]=p([this.xVal[e],this.xVal[e+1]],t,0)/m(this.xPct[e],this.xPct[e+1]);var r=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],n=Math.ceil(Number(r.toFixed(3))-1),o=this.xVal[e]+this.xNumSteps[e]*n;this.xHighestCompleteStep[e]=o}else this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e]},e}(),w={to:function(e){return void 0===e?"":e.toFixed(2)},from:Number},_={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},C=".__tooltips",x=".__aria";function T(e,t){if(!i(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function E(e,t){if(!i(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function O(e,t){if(!i(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function k(e,t){if(!i(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function N(e,t){if("object"!=typeof t||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new b(t,e.snap||!1,e.singleStep)}function P(e,t){if(t=l(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function z(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function F(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function V(e,t){if("number"!=typeof t)throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function L(e,t){var r,n=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(r=1;r<e.handles;r++)n.push(t);n.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=t}e.connect=n}function A(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function j(e,t){if(!i(t))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==t&&(e.margin=e.spectrum.getDistance(t))}function D(e,t){if(!i(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function M(e,t){var r;if(!i(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&2!==t.length&&!i(t[0])&&!i(t[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==t){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],r=0;r<e.spectrum.xNumSteps.length-1;r++)if(e.padding[0][r]<0||e.padding[1][r]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=t[0]+t[1],o=e.spectrum.xVal[0];if(n/(e.spectrum.xVal[e.spectrum.xVal.length-1]-o)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function q(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function I(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,o=t.indexOf("fixed")>=0,i=t.indexOf("snap")>=0,s=t.indexOf("hover")>=0,a=t.indexOf("unconstrained")>=0,l=t.indexOf("drag-all")>=0;if(o){if(2!==e.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");j(e,e.start[1]-e.start[0])}if(a&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||i,drag:n,dragAll:l,fixed:o,snap:i,hover:s,unconstrained:a}}function R(e,r){if(!1!==r)if(!0===r||t(r)){e.tooltips=[];for(var n=0;n<e.handles;n++)e.tooltips.push(r)}else{if((r=l(r)).length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");r.forEach((function(e){if("boolean"!=typeof e&&!t(e))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})),e.tooltips=r}}function U(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function Y(e,r){if(!t(r))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=r}function H(e,r){if(!function(e){return t(e)&&"function"==typeof e.from}(r))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=r}function B(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function $(e,t){e.documentElement=t}function W(e,t){if("string"!=typeof t&&!1!==t)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function G(e,t){if("object"!=typeof t)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof e.cssPrefix?(e.cssClasses={},Object.keys(t).forEach((function(r){e.cssClasses[r]=e.cssPrefix+t[r]}))):e.cssClasses=t}function X(e){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:w,format:w},r={step:{r:!1,t:T},keyboardPageMultiplier:{r:!1,t:E},keyboardMultiplier:{r:!1,t:O},keyboardDefaultStep:{r:!1,t:k},start:{r:!0,t:P},connect:{r:!0,t:L},direction:{r:!0,t:q},snap:{r:!1,t:z},animate:{r:!1,t:F},animationDuration:{r:!1,t:V},range:{r:!0,t:N},orientation:{r:!1,t:A},margin:{r:!1,t:j},limit:{r:!1,t:D},padding:{r:!1,t:M},behaviour:{r:!0,t:I},ariaFormat:{r:!1,t:Y},format:{r:!1,t:H},tooltips:{r:!1,t:R},keyboardSupport:{r:!0,t:B},documentElement:{r:!1,t:$},cssPrefix:{r:!0,t:W},cssClasses:{r:!0,t:G},handleAttributes:{r:!1,t:U}},o={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:_,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach((function(i){if(n(e[i])||void 0!==o[i])r[i].t(t,n(e[i])?e[i]:o[i]);else if(r[i].r)throw new Error("noUiSlider: '"+i+"' is required.")})),t.pips=e.pips;var i=document.createElement("div"),s=void 0!==i.style.msTransform,a=void 0!==i.style.transform;t.transformRule=a?"transform":s?"msTransform":"webkitTransform";return t.style=[["left","top"],["right","bottom"]][t.dir][t.ort],t}function J(t,i,c){var m,p,g,f,y,v,S,b=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},w=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),_=t,T=i.spectrum,E=[],O=[],k=[],N=0,P={},z=t.ownerDocument,F=i.documentElement||z.documentElement,V=z.body,L="rtl"===z.dir||1===i.ort?0:100;function A(e,t){var r=z.createElement("div");return t&&h(r,t),e.appendChild(r),r}function j(e,t){var r=A(e,i.cssClasses.origin),n=A(r,i.cssClasses.handle);if(A(n,i.cssClasses.touchArea),n.setAttribute("data-handle",String(t)),i.keyboardSupport&&(n.setAttribute("tabindex","0"),n.addEventListener("keydown",(function(e){return function(e,t){if(q()||I(t))return!1;var r=["Left","Right"],n=["Down","Up"],o=["PageDown","PageUp"],s=["Home","End"];i.dir&&!i.ort?r.reverse():i.ort&&!i.dir&&(n.reverse(),o.reverse());var a,l=e.key.replace("Arrow",""),c=l===o[0],h=l===o[1],u=l===n[0]||l===r[0]||c,d=l===n[1]||l===r[1]||h,m=l===s[0],p=l===s[1];if(!(u||d||m||p))return!0;if(e.preventDefault(),d||u){var g=u?0:1,f=ye(t)[g];if(null===f)return!1;!1===f&&(f=T.getDefaultStep(O[t],u,i.keyboardDefaultStep)),f*=h||c?i.keyboardPageMultiplier:i.keyboardMultiplier,f=Math.max(f,1e-7),f*=u?-1:1,a=E[t]+f}else a=p?i.spectrum.xVal[i.spectrum.xVal.length-1]:i.spectrum.xVal[0];return de(t,T.toStepping(a),!0,!0),se("slide",t),se("update",t),se("change",t),se("set",t),!1}(e,t)}))),void 0!==i.handleAttributes){var o=i.handleAttributes[t];Object.keys(o).forEach((function(e){n.setAttribute(e,o[e])}))}return n.setAttribute("role","slider"),n.setAttribute("aria-orientation",i.ort?"vertical":"horizontal"),0===t?h(n,i.cssClasses.handleLower):t===i.handles-1&&h(n,i.cssClasses.handleUpper),r}function D(e,t){return!!t&&A(e,i.cssClasses.connect)}function M(e,t){return!(!i.tooltips||!i.tooltips[t])&&A(e.firstChild,i.cssClasses.tooltip)}function q(){return _.hasAttribute("disabled")}function I(e){return p[e].hasAttribute("disabled")}function R(){y&&(ie("update"+C),y.forEach((function(e){e&&r(e)})),y=null)}function U(){R(),y=p.map(M),oe("update"+C,(function(e,t,r){if(y&&i.tooltips&&!1!==y[t]){var n=e[t];!0!==i.tooltips[t]&&(n=i.tooltips[t].to(r[t])),y[t].innerHTML=n}}))}function Y(e,t){return e.map((function(e){return T.fromStepping(t?T.getStep(e):e)}))}function H(t){var r,n=function(t){if(t.mode===e.PipsMode.Range||t.mode===e.PipsMode.Steps)return T.xVal;if(t.mode===e.PipsMode.Count){if(t.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var r=t.values-1,n=100/r,o=[];r--;)o[r]=r*n;return o.push(100),Y(o,t.stepped)}return t.mode===e.PipsMode.Positions?Y(t.values,t.stepped):t.mode===e.PipsMode.Values?t.stepped?t.values.map((function(e){return T.fromStepping(T.getStep(T.toStepping(e)))})):t.values:[]}(t),o={},i=T.xVal[0],s=T.xVal[T.xVal.length-1],a=!1,l=!1,c=0;return(r=n.slice().sort((function(e,t){return e-t})),n=r.filter((function(e){return!this[e]&&(this[e]=!0)}),{}))[0]!==i&&(n.unshift(i),a=!0),n[n.length-1]!==s&&(n.push(s),l=!0),n.forEach((function(r,i){var s,h,u,d,m,p,g,f,y,v,S=r,b=n[i+1],w=t.mode===e.PipsMode.Steps;for(w&&(s=T.xNumSteps[i]),s||(s=b-S),void 0===b&&(b=S),s=Math.max(s,1e-7),h=S;h<=b;h=Number((h+s).toFixed(7))){for(f=(m=(d=T.toStepping(h))-c)/(t.density||1),v=m/(y=Math.round(f)),u=1;u<=y;u+=1)o[(p=c+u*v).toFixed(5)]=[T.fromStepping(p),0];g=n.indexOf(h)>-1?e.PipsType.LargeValue:w?e.PipsType.SmallValue:e.PipsType.NoValue,!i&&a&&h!==b&&(g=0),h===b&&l||(o[d.toFixed(5)]=[h,g]),c=d}})),o}function B(t,r,n){var o,s,a=z.createElement("div"),l=((o={})[e.PipsType.None]="",o[e.PipsType.NoValue]=i.cssClasses.valueNormal,o[e.PipsType.LargeValue]=i.cssClasses.valueLarge,o[e.PipsType.SmallValue]=i.cssClasses.valueSub,o),c=((s={})[e.PipsType.None]="",s[e.PipsType.NoValue]=i.cssClasses.markerNormal,s[e.PipsType.LargeValue]=i.cssClasses.markerLarge,s[e.PipsType.SmallValue]=i.cssClasses.markerSub,s),u=[i.cssClasses.valueHorizontal,i.cssClasses.valueVertical],d=[i.cssClasses.markerHorizontal,i.cssClasses.markerVertical];function m(e,t){var r=t===i.cssClasses.value,n=r?l:c;return t+" "+(r?u:d)[i.ort]+" "+n[e]}return h(a,i.cssClasses.pips),h(a,0===i.ort?i.cssClasses.pipsHorizontal:i.cssClasses.pipsVertical),Object.keys(t).forEach((function(o){!function(t,o,s){if((s=r?r(o,s):s)!==e.PipsType.None){var l=A(a,!1);l.className=m(s,i.cssClasses.marker),l.style[i.style]=t+"%",s>e.PipsType.NoValue&&((l=A(a,!1)).className=m(s,i.cssClasses.value),l.setAttribute("data-value",String(o)),l.style[i.style]=t+"%",l.innerHTML=String(n.to(o)))}}(o,t[o][0],t[o][1])})),a}function $(){f&&(r(f),f=null)}function W(e){$();var t=H(e),r=e.filter,n=e.format||{to:function(e){return String(Math.round(e))}};return f=_.appendChild(B(t,r,n))}function G(){var e=m.getBoundingClientRect(),t="offset"+["Width","Height"][i.ort];return 0===i.ort?e.width||m[t]:e.height||m[t]}function J(e,t,r,n){var o=function(o){var s,a,l=function(e,t,r){var n=0===e.type.indexOf("touch"),o=0===e.type.indexOf("mouse"),i=0===e.type.indexOf("pointer"),s=0,a=0;if(0===e.type.indexOf("MSPointer")&&(i=!0),"mousedown"===e.type&&!e.buttons&&!e.touches)return!1;if(n){var l=function(t){var n=t.target;return n===r||r.contains(n)||e.composed&&e.composedPath().shift()===r};if("touchstart"===e.type){var c=Array.prototype.filter.call(e.touches,l);if(c.length>1)return!1;s=c[0].pageX,a=c[0].pageY}else{var h=Array.prototype.find.call(e.changedTouches,l);if(!h)return!1;s=h.pageX,a=h.pageY}}return t=t||d(z),(o||i)&&(s=e.clientX+t.x,a=e.clientY+t.y),e.pageOffset=t,e.points=[s,a],e.cursor=o||i,e}(o,n.pageOffset,n.target||t);return!!l&&!(q()&&!n.doNotReject)&&(s=_,a=i.cssClasses.tap,!((s.classList?s.classList.contains(a):new RegExp("\\b"+a+"\\b").test(s.className))&&!n.doNotReject))&&!(e===b.start&&void 0!==l.buttons&&l.buttons>1)&&(!n.hover||!l.buttons)&&(w||l.preventDefault(),l.calcPoint=l.points[i.ort],void r(l,n))},s=[];return e.split(" ").forEach((function(e){t.addEventListener(e,o,!!w&&{passive:!0}),s.push([e,o])})),s}function K(e){var t,r,n,o,s,l,c=100*(e-(t=m,r=i.ort,n=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,l=d(o),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),r?n.top+l.y-s.clientTop:n.left+l.x-s.clientLeft))/G();return c=a(c),i.dir?100-c:c}function Q(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&ee(e,t)}function Z(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return ee(e,t);var r=(i.dir?-1:1)*(e.calcPoint-t.startCalcPoint);ce(r>0,100*r/t.baseSize,t.locations,t.handleNumbers,t.connect)}function ee(e,t){t.handle&&(u(t.handle,i.cssClasses.active),N-=1),t.listeners.forEach((function(e){F.removeEventListener(e[0],e[1])})),0===N&&(u(_,i.cssClasses.drag),ue(),e.cursor&&(V.style.cursor="",V.removeEventListener("selectstart",o))),t.handleNumbers.forEach((function(e){se("change",e),se("set",e),se("end",e)}))}function te(e,t){if(!t.handleNumbers.some(I)){var r;1===t.handleNumbers.length&&(r=p[t.handleNumbers[0]].children[0],N+=1,h(r,i.cssClasses.active)),e.stopPropagation();var n=[],s=J(b.move,F,Z,{target:e.target,handle:r,connect:t.connect,listeners:n,startCalcPoint:e.calcPoint,baseSize:G(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:O.slice()}),a=J(b.end,F,ee,{target:e.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:t.handleNumbers}),l=J("mouseout",F,Q,{target:e.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:t.handleNumbers});n.push.apply(n,s.concat(a,l)),e.cursor&&(V.style.cursor=getComputedStyle(e.target).cursor,p.length>1&&h(_,i.cssClasses.drag),V.addEventListener("selectstart",o,!1)),t.handleNumbers.forEach((function(e){se("start",e)}))}}function re(e){e.stopPropagation();var t=K(e.calcPoint),r=function(e){var t=100,r=!1;return p.forEach((function(n,o){if(!I(o)){var i=O[o],s=Math.abs(i-e);(s<t||s<=t&&e>i||100===s&&100===t)&&(r=o,t=s)}})),r}(t);!1!==r&&(i.events.snap||s(_,i.cssClasses.tap,i.animationDuration),de(r,t,!0,!0),ue(),se("slide",r,!0),se("update",r,!0),i.events.snap?te(e,{handleNumbers:[r]}):(se("change",r,!0),se("set",r,!0)))}function ne(e){var t=K(e.calcPoint),r=T.getStep(t),n=T.fromStepping(r);Object.keys(P).forEach((function(e){"hover"===e.split(".")[0]&&P[e].forEach((function(e){e.call(ve,n)}))}))}function oe(e,t){P[e]=P[e]||[],P[e].push(t),"update"===e.split(".")[0]&&p.forEach((function(e,t){se("update",t)}))}function ie(e){var t=e&&e.split(".")[0],r=t?e.substring(t.length):e;Object.keys(P).forEach((function(e){var n=e.split(".")[0],o=e.substring(n.length);t&&t!==n||r&&r!==o||function(e){return e===x||e===C}(o)&&r!==o||delete P[e]}))}function se(e,t,r){Object.keys(P).forEach((function(n){var o=n.split(".")[0];e===o&&P[n].forEach((function(e){e.call(ve,E.map(i.format.to),t,E.slice(),r||!1,O.slice(),ve)}))}))}function ae(e,t,r,n,o,s){var l;return p.length>1&&!i.events.unconstrained&&(n&&t>0&&(l=T.getAbsoluteDistance(e[t-1],i.margin,!1),r=Math.max(r,l)),o&&t<p.length-1&&(l=T.getAbsoluteDistance(e[t+1],i.margin,!0),r=Math.min(r,l))),p.length>1&&i.limit&&(n&&t>0&&(l=T.getAbsoluteDistance(e[t-1],i.limit,!1),r=Math.min(r,l)),o&&t<p.length-1&&(l=T.getAbsoluteDistance(e[t+1],i.limit,!0),r=Math.max(r,l))),i.padding&&(0===t&&(l=T.getAbsoluteDistance(0,i.padding[0],!1),r=Math.max(r,l)),t===p.length-1&&(l=T.getAbsoluteDistance(100,i.padding[1],!0),r=Math.min(r,l))),!((r=a(r=T.getStep(r)))===e[t]&&!s)&&r}function le(e,t){var r=i.ort;return(r?t:e)+", "+(r?e:t)}function ce(e,t,r,n,o){var i=r.slice(),s=n[0],a=[!e,e],l=[e,!e];n=n.slice(),e&&n.reverse(),n.length>1?n.forEach((function(e,r){var n=ae(i,e,i[e]+t,a[r],l[r],!1);!1===n?t=0:(t=n-i[e],i[e]=n)})):a=l=[!0];var c=!1;n.forEach((function(e,n){c=de(e,r[e]+t,a[n],l[n])||c})),c&&(n.forEach((function(e){se("update",e),se("slide",e)})),null!=o&&se("drag",s))}function he(e,t){return i.dir?100-e-t:e}function ue(){k.forEach((function(e){var t=O[e]>50?-1:1,r=3+(p.length+t*e);p[e].style.zIndex=String(r)}))}function de(e,t,r,n,o){return o||(t=ae(O,e,t,r,n,!1)),!1!==t&&(function(e,t){O[e]=t,E[e]=T.fromStepping(t);var r="translate("+le(he(t,0)-L+"%","0")+")";p[e].style[i.transformRule]=r,me(e),me(e+1)}(e,t),!0)}function me(e){if(g[e]){var t=0,r=100;0!==e&&(t=O[e-1]),e!==g.length-1&&(r=O[e]);var n=r-t,o="translate("+le(he(t,n)+"%","0")+")",s="scale("+le(n/100,"1")+")";g[e].style[i.transformRule]=o+" "+s}}function pe(e,t){return null===e||!1===e||void 0===e?O[t]:("number"==typeof e&&(e=String(e)),!1!==(e=i.format.from(e))&&(e=T.toStepping(e)),!1===e||isNaN(e)?O[t]:e)}function ge(e,t,r){var n=l(e),o=void 0===O[0];t=void 0===t||t,i.animate&&!o&&s(_,i.cssClasses.tap,i.animationDuration),k.forEach((function(e){de(e,pe(n[e],e),!0,!1,r)}));var a=1===k.length?0:1;if(o&&T.hasNoSize()&&(r=!0,O[0]=0,k.length>1)){var c=100/(k.length-1);k.forEach((function(e){O[e]=e*c}))}for(;a<k.length;++a)k.forEach((function(e){de(e,O[e],!0,!0,r)}));ue(),k.forEach((function(e){se("update",e),null!==n[e]&&t&&se("set",e)}))}function fe(e){if(void 0===e&&(e=!1),e)return 1===E.length?E[0]:E.slice(0);var t=E.map(i.format.to);return 1===t.length?t[0]:t}function ye(e){var t=O[e],r=T.getNearbySteps(t),n=E[e],o=r.thisStep.step,s=null;if(i.snap)return[n-r.stepBefore.startValue||null,r.stepAfter.startValue-n||null];!1!==o&&n+o>r.stepAfter.startValue&&(o=r.stepAfter.startValue-n),s=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===t?o=null:0===t&&(s=null);var a=T.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(a))),null!==s&&!1!==s&&(s=Number(s.toFixed(a))),[s,o]}h(S=_,i.cssClasses.target),0===i.dir?h(S,i.cssClasses.ltr):h(S,i.cssClasses.rtl),0===i.ort?h(S,i.cssClasses.horizontal):h(S,i.cssClasses.vertical),h(S,"rtl"===getComputedStyle(S).direction?i.cssClasses.textDirectionRtl:i.cssClasses.textDirectionLtr),m=A(S,i.cssClasses.base),function(e,t){var r=A(t,i.cssClasses.connects);p=[],(g=[]).push(D(r,e[0]));for(var n=0;n<i.handles;n++)p.push(j(t,n)),k[n]=n,g.push(D(r,e[n+1]))}(i.connect,m),(v=i.events).fixed||p.forEach((function(e,t){J(b.start,e.children[0],te,{handleNumbers:[t]})})),v.tap&&J(b.start,m,re,{}),v.hover&&J(b.move,m,ne,{hover:!0}),v.drag&&g.forEach((function(e,t){if(!1!==e&&0!==t&&t!==g.length-1){var r=p[t-1],n=p[t],o=[e],s=[r,n],a=[t-1,t];h(e,i.cssClasses.draggable),v.fixed&&(o.push(r.children[0]),o.push(n.children[0])),v.dragAll&&(s=p,a=k),o.forEach((function(t){J(b.start,t,te,{handles:s,handleNumbers:a,connect:e})}))}})),ge(i.start),i.pips&&W(i.pips),i.tooltips&&U(),ie("update"+x),oe("update"+x,(function(e,t,r,n,o){k.forEach((function(e){var t=p[e],n=ae(O,e,0,!0,!0,!0),s=ae(O,e,100,!0,!0,!0),a=o[e],l=String(i.ariaFormat.to(r[e]));n=T.fromStepping(n).toFixed(1),s=T.fromStepping(s).toFixed(1),a=T.fromStepping(a).toFixed(1),t.children[0].setAttribute("aria-valuemin",n),t.children[0].setAttribute("aria-valuemax",s),t.children[0].setAttribute("aria-valuenow",a),t.children[0].setAttribute("aria-valuetext",l)}))}));var ve={destroy:function(){for(ie(x),ie(C),Object.keys(i.cssClasses).forEach((function(e){u(_,i.cssClasses[e])}));_.firstChild;)_.removeChild(_.firstChild);delete _.noUiSlider},steps:function(){return k.map(ye)},on:oe,off:ie,get:fe,set:ge,setHandle:function(e,t,r,n){if(!((e=Number(e))>=0&&e<k.length))throw new Error("noUiSlider: invalid handle number, got: "+e);de(e,pe(t,e),!0,!0,n),se("update",e),r&&se("set",e)},reset:function(e){ge(i.start,e)},__moveHandles:function(e,t,r){ce(e,t,O,r)},options:c,updateOptions:function(e,t){var r=fe(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach((function(t){void 0!==e[t]&&(c[t]=e[t])}));var s=X(c);o.forEach((function(t){void 0!==e[t]&&(i[t]=s[t])})),T=s.spectrum,i.margin=s.margin,i.limit=s.limit,i.padding=s.padding,i.pips?W(i.pips):$(),i.tooltips?U():R(),O=[],ge(n(e.start)?e.start:r,t)},target:_,removePips:$,removeTooltips:R,getPositions:function(){return O.slice()},getTooltips:function(){return y},getOrigins:function(){return p},pips:W};return ve}function K(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var r=J(e,X(t),t);return e.noUiSlider=r,r}var Q={__spectrum:b,cssClasses:_,create:K};e.create=K,e.cssClasses=_,e.default=Q,Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(()=>{"use strict";const e=[{x:252,y:1},{x:280,y:42},{x:305,y:71},{x:310,y:118},{x:355,y:140},{x:351,y:188},{x:394,y:212},{x:394,y:288},{x:379,y:334},{x:423,y:345},{x:411,y:410},{x:450,y:444},{x:452,y:473},{x:423,y:490},{x:442,y:526},{x:494,y:535},{x:491,y:564},{x:469,y:598},{x:450,y:662},{x:378,y:660},{x:370,y:697},{x:189,y:708},{x:160,y:655},{x:120,y:686},{x:110,y:642},{x:63,y:641},{x:3,y:560},{x:86,y:524},{x:18,y:457},{x:110,y:412},{x:74,y:355},{x:124,y:326},{x:99,y:224},{x:165,y:215},{x:155,y:136}],t=[{num:"1",name:"Большой шар с рисунком",count:"2",year:"1960",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"2",name:"Зелёный шар с цветами",count:"5",year:"2000",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"3",name:"Красный матовый шар",count:"3",year:"1990",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"4",name:"Сосулька красная",count:"2",year:"1980",shape:"фигурка",color:"красный",size:"большой",favorite:!1},{num:"5",name:"Красный виноград",count:"4",year:"1980",shape:"фигурка",color:"красный",size:"средний",favorite:!0},{num:"6",name:"Красный шар с рисунком",count:"6",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"7",name:"Молочно-белый шар",count:"12",year:"1960",shape:"шар",color:"белый",size:"средний",favorite:!0},{num:"8",name:"Красный шар",count:"10",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"9",name:"Колокольчик старинный",count:"2",year:"1950",shape:"колокольчик",color:"белый",size:"большой",favorite:!1},{num:"10",name:"Белый шар ретро",count:"7",year:"1960",shape:"шар",color:"белый",size:"большой",favorite:!1},{num:"11",name:"Шишка еловая белая",count:"11",year:"1960",shape:"шишка",color:"белый",size:"малый",favorite:!1},{num:"12",name:"Белый шар с цветами",count:"5",year:"1980",shape:"шар",color:"белый",size:"большой",favorite:!1},{num:"13",name:"Шар расписной Река",count:"3",year:"1970",shape:"шар",color:"синий",size:"большой",favorite:!0},{num:"14",name:"Шар расписной Деревня",count:"4",year:"1970",shape:"шар",color:"синий",size:"большой",favorite:!0},{num:"15",name:"Колокольчик расписной",count:"3",year:"1970",shape:"колокольчик",color:"синий",size:"средний",favorite:!1},{num:"16",name:"Шишка расписная Пейзаж",count:"3",year:"1970",shape:"шишка",color:"синий",size:"средний",favorite:!0},{num:"17",name:"Шишка расписная",count:"7",year:"1970",shape:"шишка",color:"красный",size:"средний",favorite:!1},{num:"18",name:"Желтый шар с бантом",count:"2",year:"2010",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"19",name:"Желтый шар с паетками",count:"12",year:"1980",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"20",name:"Красный шар с бантом",count:"8",year:"1950",shape:"шар",color:"красный",size:"средний",favorite:!0},{num:"21",name:"Красный шар с звёздами",count:"4",year:"1970",shape:"шар",color:"красный",size:"большой",favorite:!0},{num:"22",name:"Шишка еловая золотая",count:"11",year:"1990",shape:"шишка",color:"желтый",size:"малый",favorite:!1},{num:"23",name:"Колокольчик старинный",count:"9",year:"1950",shape:"колокольчик",color:"желтый",size:"большой",favorite:!1},{num:"24",name:"Снежинка изящная",count:"1",year:"1940",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"25",name:"Розовый шар с блёстками",count:"12",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"26",name:"Рубиново-золотой шар",count:"8",year:"1960",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"27",name:"Красный шар с узором",count:"4",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"28",name:"Бордовый шар с узором",count:"10",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"29",name:"Старинный шар с цветами",count:"5",year:"1950",shape:"шар",color:"желтый",size:"большой",favorite:!0},{num:"30",name:"Старинный шар с узором",count:"8",year:"1950",shape:"шар",color:"желтый",size:"большой",favorite:!0},{num:"31",name:"Красный шар с блёстками",count:"8",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"32",name:"Синий шар Вселенная",count:"11",year:"1970",shape:"шар",color:"синий",size:"большой",favorite:!1},{num:"33",name:"Синий шар со снежинкой",count:"6",year:"2010",shape:"шар",color:"синий",size:"средний",favorite:!1},{num:"34",name:"Зелёный шар с узором",count:"8",year:"2010",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"35",name:"Фигурка Лис в шарфе",count:"8",year:"1950",shape:"фигурка",color:"желтый",size:"средний",favorite:!0},{num:"36",name:"Сиреневый шар Метель",count:"1",year:"2000",shape:"шар",color:"синий",size:"большой",favorite:!1},{num:"37",name:"Зелёный шар Метель",count:"6",year:"2000",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"38",name:"Голубой шар Метель",count:"6",year:"2000",shape:"шар",color:"синий",size:"большой",favorite:!1},{num:"39",name:"Красная снежинка",count:"6",year:"1990",shape:"снежинка",color:"красный",size:"большой",favorite:!1},{num:"40",name:"Снежинка золотая",count:"12",year:"2020",shape:"снежинка",color:"желтый",size:"большой",favorite:!1},{num:"41",name:"Снежинка арктическая",count:"11",year:"2020",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"42",name:"Зелёный шар",count:"10",year:"1980",shape:"шар",color:"зелёный",size:"средний",favorite:!1},{num:"43",name:"Снежинка двухцветная",count:"6",year:"1960",shape:"снежинка",color:"красный",size:"большой",favorite:!1},{num:"44",name:"Фигурка Ангела",count:"11",year:"1940",shape:"фигурка",color:"красный",size:"средний",favorite:!0},{num:"45",name:"Снежинка новогодняя",count:"1",year:"1980",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"46",name:"Фигурка Мухомор",count:"10",year:"1950",shape:"фигурка",color:"красный",size:"малый",favorite:!1},{num:"47",name:"Фигурка Колодец",count:"6",year:"1950",shape:"фигурка",color:"красный",size:"малый",favorite:!1},{num:"48",name:"Желтый шар с бантом",count:"6",year:"1960",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"49",name:"Снежинка с бирюзой",count:"4",year:"1980",shape:"снежинка",color:"желтый",size:"большой",favorite:!1},{num:"50",name:"Колокольчик большой",count:"3",year:"2020",shape:"колокольчик",color:"красный",size:"большой",favorite:!1},{num:"51",name:"Шишка с изморозью",count:"12",year:"1970",shape:"шишка",color:"красный",size:"малый",favorite:!1},{num:"52",name:"Красный шар с надписью",count:"12",year:"1990",shape:"шар",color:"красный",size:"большой",favorite:!0},{num:"53",name:"Снежинка серебристая",count:"6",year:"2020",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"54",name:"Зелёный шар с рисунком",count:"6",year:"2010",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"55",name:"Пряничный домик",count:"1",year:"1940",shape:"фигурка",color:"желтый",size:"большой",favorite:!1},{num:"56",name:"Пряничный теремок",count:"1",year:"1940",shape:"фигурка",color:"желтый",size:"малый",favorite:!1},{num:"57",name:"Пряничная избушка",count:"1",year:"1940",shape:"фигурка",color:"желтый",size:"средний",favorite:!1},{num:"58",name:"Фигурка Белого медведя",count:"2",year:"1980",shape:"фигурка",color:"белый",size:"средний",favorite:!1},{num:"59",name:"Желтый шар с надписью",count:"10",year:"1990",shape:"шар",color:"желтый",size:"средний",favorite:!1},{num:"60",name:"Фигурка Голубь",count:"12",year:"1940",shape:"фигурка",color:"белый",size:"средний",favorite:!0}];var n;!function(e){e[e.Add=0]="Add",e[e.Remove=1]="Remove",e[e.Error=2]="Error"}(n||(n={}));const o=1940,i=2020;var s;!function(e){e.NoSort="nosort",e.NameInc="sort-name-inc",e.NameDec="sort-name-dec",e.YearInc="sort-year-inc",e.YearDec="sort-year-dec"}(s||(s={}));class a{constructor(){this.writeSettingsToLocalStorage=()=>{localStorage.setItem("*filterObject",JSON.stringify(this.filterObject)),localStorage.setItem("*chosenToys",JSON.stringify(this.chosenToys)),localStorage.setItem("*treeSettings",JSON.stringify(this.treeSettings))},this.filterForm=e=>this.filterObject.form.includes(e.shape),this.filterColor=e=>this.filterObject.color.includes(e.color),this.filterSize=e=>this.filterObject.size.includes(e.size),this.filterOnlyFavorites=e=>e.favorite,this.filterRangeCount=e=>+e.year>=this.filterObject.minYear&&+e.year<=this.filterObject.maxYear,this.filterRangeYear=e=>+e.count>=this.filterObject.minCount&&+e.count<=this.filterObject.maxCount,this.filterSearch=e=>{const t=e.name.toLowerCase(),r=this.filterObject.search.toLowerCase();return-1!==t.indexOf(r)},this.sortNameInc=(e,t)=>e.name<=t.name?-1:1,this.sortNameDec=(e,t)=>e.name<t.name?1:-1,this.sortYearInc=(e,t)=>+e.year<+t.year?-1:1,this.sortYearDec=(e,t)=>+e.year<+t.year?1:-1,this.data=t,this.chosenToys=[],this.filterObject={form:[],color:[],size:[],onlyFavorites:!1,minCount:1,maxCount:12,minYear:o,maxYear:i,sort:"nosort",search:""},this.treeSettings={sound:!1,snow:!1,tree:"1",bg:"1"},this.downloadSettings(),window.addEventListener("beforeunload",this.writeSettingsToLocalStorage)}downloadSettings(){localStorage.getItem("*filterObject")&&(this.filterObject=JSON.parse(localStorage.getItem("*filterObject"))),localStorage.getItem("*chosenToys")&&(this.chosenToys=JSON.parse(localStorage.getItem("*chosenToys"))),localStorage.getItem("*treeSettings")&&(this.treeSettings=JSON.parse(localStorage.getItem("*treeSettings")))}getFilterData(){return this.filterAndSortData()}getChosenToys(){return this.chosenToys.slice(0)}isToyChosen(e){return this.chosenToys.includes(e)}getNumberChosenToys(){return this.chosenToys.length}removeToyFromChosen(e){const t=this.chosenToys.indexOf(e);this.chosenToys=this.removeElemFromArr(t,this.chosenToys)}addToyToChosen(e){this.chosenToys.push(e)}getRangeCountSlider(){return[this.filterObject.minCount,this.filterObject.maxCount]}getRangeYearSlider(){return[this.filterObject.minYear,this.filterObject.maxYear]}updateValuesCountSlider(e){this.filterObject.minCount=parseInt(e[0],10),this.filterObject.maxCount=parseInt(e[1],10)}updateValuesYearSlider(e){this.filterObject.minYear=parseInt(e[0],10),this.filterObject.maxYear=parseInt(e[1],10)}getFilterSettings(){return this.filterObject.form.slice(0).concat(this.filterObject.color.slice(0)).concat(this.filterObject.size.slice(0))}getOnlyFavoritesSettings(){return this.filterObject.onlyFavorites}getSortValue(){return this.filterObject.sort}getSearchValue(){return this.filterObject.search}updateValueFormFilter(e){if(this.filterObject.form.includes(e)){const t=this.filterObject.form.indexOf(e);this.filterObject.form=this.removeElemFromArr(t,this.filterObject.form)}else this.filterObject.form.push(e)}updateValueColorFilter(e){if(this.filterObject.color.includes(e)){const t=this.filterObject.color.indexOf(e);this.filterObject.color=this.removeElemFromArr(t,this.filterObject.color)}else this.filterObject.color.push(e)}updateValueSizeFilter(e){if(this.filterObject.size.includes(e)){const t=this.filterObject.size.indexOf(e);this.filterObject.size=this.removeElemFromArr(t,this.filterObject.size)}else this.filterObject.size.push(e)}updateValueOnlyFavorites(e){this.filterObject.onlyFavorites=e}changeInputSearch(e){this.filterObject.search=e}changeSortValue(e){this.filterObject.sort=e}clearFilters(){this.filterObject.form=[],this.filterObject.color=[],this.filterObject.size=[],this.filterObject.onlyFavorites=!1,this.filterObject.minCount=1,this.filterObject.maxCount=12,this.filterObject.minYear=o,this.filterObject.maxYear=i,this.filterObject.search=""}clearSettings(){localStorage.removeItem("*filterObject"),localStorage.removeItem("*chosenToys"),this.clearFilters(),this.filterObject.sort="nosort",this.chosenToys=[]}filterAndSortData(){let e=this.data.slice(0);return this.filterObject.form.length>0&&(e=e.filter(this.filterForm)),this.filterObject.color.length>0&&(e=e.filter(this.filterColor)),this.filterObject.size.length>0&&(e=e.filter(this.filterSize)),this.filterObject.onlyFavorites&&(e=e.filter(this.filterOnlyFavorites)),e=e.filter(this.filterRangeCount),e=e.filter(this.filterRangeYear),""!==this.filterObject.search&&(e=e.filter(this.filterSearch)),this.filterObject.sort===s.NameInc?e=e.sort(this.sortNameInc):this.filterObject.sort===s.NameDec?e=e.sort(this.sortNameDec):this.filterObject.sort===s.YearInc?e=e.sort(this.sortYearInc):this.filterObject.sort===s.YearDec&&(e=e.sort(this.sortYearDec)),e}removeElemFromArr(e,t){return t.slice(0,e).concat(t.slice(e+1))}getSoundSettings(){return this.treeSettings.sound}changeSoundSettings(e){this.treeSettings.sound=e}getSnowSettings(){return this.treeSettings.snow}changeSnowSettings(e){this.treeSettings.snow=e}clearTreeSettings(){this.treeSettings={sound:!1,snow:!1,tree:"1",bg:"1"}}getActiveTreeNumber(){return this.treeSettings.tree}changeActiveTree(e){this.treeSettings.tree=e}getActiveBgNumber(){return this.treeSettings.bg}changeActiveBg(e){this.treeSettings.bg=e}getActiveBg(){return this.treeSettings.bg}getToysToPrint(){return 0===this.chosenToys.length?this.getDefaultToysToPrint():this.getChosenToysToPrint()}getDefaultToysToPrint(){let e=[];for(let t=0;t<20;t+=1){let r=this.data[t].num,n=this.data[t].count;e.push({num:r,count:n})}return e}getChosenToysToPrint(){let e=[];for(let t=0;t<this.chosenToys.length;t+=1){let r=this.chosenToys[t],n=this.getToyCount(r);e.push({num:r,count:n})}return e}getToyCount(e){return this.data[+e-1].count}}var l=r(211);class c{constructor(e,t){this.handleClickOnToys=e=>{const t=e.target.closest(".toy");if(!t)return;const{num:r}=t.dataset,o=this.controllerToys.handleClickOnToy(r),i=document.querySelector(".popup");switch(o){case n.Add:t.className="toy toy_is_chosen";break;case n.Remove:t.className="toy";break;case n.Error:"popup popup_is_hidden"!==i.className&&(i.className="popup popup_is_hidden"),i.classList.remove("popup_is_hidden"),i.style.top=`${(e.pageY-120).toString()}px`,i.style.left=`${(e.pageX-150).toString()}px`,i.classList.add("popup_is_shown"),window.addEventListener("click",this.handleClickOnWindow),this.isClickForPopup=!0}},this.handleClickOnWindow=()=>{const e=document.querySelector(".popup");null!==e&&e.classList.contains("popup_is_shown")&&!this.isClickForPopup&&(e.classList.remove("popup_is_shown"),setTimeout((()=>{e.classList.add("popup_is_hidden")}),300)),this.isClickForPopup=!1},this.handleChangeCountSlider=e=>{this.updateCountSliderOutput(e),this.controllerToys.updateValuesCountSlider(e)},this.handleChangeYearSlider=e=>{this.updateYearSliderOutput(e),this.controllerToys.updateValuesYearSlider(e)},this.handleChangeFormCheckboxes=e=>{const t=e.target;this.controllerToys.updateValueFormCheckbox(t.dataset.filter)},this.handleChangeColorCheckboxes=e=>{const t=e.target;this.controllerToys.updateValueColorCheckbox(t.dataset.filter)},this.handleChangeSizeCheckboxes=e=>{const t=e.target;this.controllerToys.updateValueSizeCheckbox(t.dataset.filter)},this.handleChangeFavoriteCheckboxes=e=>{e.target.checked?this.controllerToys.updateValueOnlyFavorites(!0):this.controllerToys.updateValueOnlyFavorites(!1)},this.handleInputSearch=e=>{const{value:t}=e.target;this.controllerToys.handleInputSearch(t)},this.handleChangeSortSelectValue=e=>{const{value:t}=e.target;this.controllerToys.handleChangeSortSelectValue(t)},this.handleClearFilters=()=>{this.controllerToys.handleClearFilters(),this.clearFilters()},this.handleClearSettings=()=>{this.controllerToys.handleClearSettings(),this.clearFilters(),this.initSortSelect();const e=this.controllerToys.getNumberChosenToys();this.showNumChosenToys(e)},this.controllerToys=e,this.rootElem=t,this.numChosenToys=document.querySelector(".header__favorite-toys")}showPage(e,t){return r=this,n=void 0,i=function*(){const r=yield fetch("./public/pages/toys-page.html"),n=yield r.text();this.rootElem.innerHTML=n,document.querySelector("body").className="toys-page",this.createSliders(),this.initSearchInput(),this.initFilterCheckboxes(),this.initOnlyFavoritesCheckbox(),this.initSortSelect(),this.showNumChosenToys(t.length),this.toysContainer=document.querySelector(".toys__container"),this.showToys(e,t),this.addEventsForChosingToys(),this.addEventsListenersForSettings()},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{l(i.next(e))}catch(e){t(e)}}function a(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(s,a)}l((i=i.apply(r,n||[])).next())}));var r,n,o,i}createSliders(){const e=this.controllerToys.getRangeCountSlider(),t=this.controllerToys.getRangeYearSlider();this.countSlider=document.querySelector(".count-slider"),l.create(this.countSlider,{range:{min:1,max:12},step:1,start:[e[0],e[1]],connect:!0,behaviour:"tap-drag"}),this.updateCountSliderOutput([e[0].toString(),e[1].toString()]),this.countSlider.noUiSlider.on("change",this.handleChangeCountSlider),this.yearSlider=document.querySelector(".year-slider"),l.create(this.yearSlider,{range:{min:o,max:i},step:1,start:[t[0],t[1]],connect:!0,behaviour:"tap-drag"}),this.updateYearSliderOutput([t[0].toString(),t[1].toString()]),this.yearSlider.noUiSlider.on("change",this.handleChangeYearSlider)}initSearchInput(){const e=document.querySelector(".search__input"),t=this.controllerToys.getSearchValue();e.value=t,e.focus()}showNumChosenToys(e){this.numChosenToys.textContent=e.toString()}showToys(e,t){0!==e.length?(this.toysContainer.innerHTML='<div class="popup popup_is_hidden">Извините, все слоты заполнены</div>',e.forEach((e=>{let r="toy";t.includes(e.num)&&(r+=" toy_is_chosen");const n=e.favorite?"да":"нет";this.toysContainer.innerHTML+=`\n        <div class="${r}" data-num="${e.num}">\n          <h3 class="toy__title">${e.name}</h3>\n          <img class="toy__photo" src="./public/toys/${e.num}.webp" alt="toy">\n          <div class="toy__description">\n            <p class="toy__count">Количество: <span class="toy__data">${e.count}</span></p>\n            <p class="toy__year">Год покупки: <span class="toy__data">${e.year}</span></p>\n            <p class="toy__shape">Форма: <span class="toy__data">${e.shape}</span></p>\n            <p class="toy__color">Цвет: <span class="toy__data">${e.color}</span></p>\n            <p class="toy__size">Размер: <span class="toy__data">${e.size}</span></p>\n            <p class="toy__favorite">Любимая: <span class="toy__data">${n}</span></p>\n          </div>\n          <div class="toy__ribbon"></div>\n        </div>\n      `}))):this.toysContainer.innerHTML='<div class="notification">Извините, совпадений не обнаружено...</div>'}addEventsForChosingToys(){this.toysContainer.addEventListener("click",this.handleClickOnToys)}updateCountSliderOutput(e){const t=document.querySelectorAll(".ranges__count-slider-container .output-slider"),[r,n]=e;[t[0].textContent]=r.split("."),[t[1].textContent]=n.split(".")}updateYearSliderOutput(e){const t=document.querySelectorAll(".ranges__year-slider-container .output-slider"),[r,n]=e;[t[0].textContent]=r.split("."),[t[1].textContent]=n.split(".")}initFilterCheckboxes(){const e=this.controllerToys.getFilterCheckboxSettings(),t=Array.from(document.querySelectorAll(".filters__input"));for(let r=0;r<t.length;r+=1)void 0!==t[r].dataset.filter&&e.includes(t[r].dataset.filter)?t[r].checked=!0:t[r].checked=!1}initOnlyFavoritesCheckbox(){const e=this.controllerToys.getOnlyFavoritesCheckboxSettings();document.getElementById("favorite").checked=!!e}initSortSelect(){const e=this.controllerToys.getSortValue();document.querySelector(".sort__type-select").value=e}addEventsListenersForSettings(){document.querySelectorAll(".filters__item-form input").forEach((e=>{e.addEventListener("change",this.handleChangeFormCheckboxes)})),document.querySelectorAll(".filters__item-color input").forEach((e=>{e.addEventListener("change",this.handleChangeColorCheckboxes)})),document.querySelectorAll(".filters__item-size input").forEach((e=>{e.addEventListener("change",this.handleChangeSizeCheckboxes)})),document.getElementById("favorite").addEventListener("change",this.handleChangeFavoriteCheckboxes),document.querySelector(".search__input").addEventListener("input",this.handleInputSearch),document.querySelector(".sort__type-select").addEventListener("change",this.handleChangeSortSelectValue),document.getElementById("clear-filters-btn").addEventListener("click",this.handleClearFilters),document.getElementById("clear-settings-btn").addEventListener("click",this.handleClearSettings)}clearFilters(){this.initSearchInput(),this.initFilterCheckboxes(),this.initOnlyFavoritesCheckbox(),this.updateSliders()}updateSliders(){var e,t,r,n;const o=this.controllerToys.getRangeCountSlider(),i=this.controllerToys.getRangeYearSlider();null===(t=null===(e=this.countSlider)||void 0===e?void 0:e.noUiSlider)||void 0===t||t.set(o),null===(n=null===(r=this.yearSlider)||void 0===r?void 0:r.noUiSlider)||void 0===n||n.set(i);const s=[o[0].toString(),o[1].toString()],a=[i[0].toString(),i[1].toString()];this.updateCountSliderOutput(s),this.updateYearSliderOutput(a)}}class h{constructor(t,r){this.handleClickWindow=()=>{this.controllerTree.getSoundSettings()&&this.playSound(),window.removeEventListener("click",this.handleClickWindow)},this.handleSoundOnOff=e=>{e.target.checked?(this.controllerTree.changeSoundSettings(!0),this.playSound()):(this.controllerTree.changeSoundSettings(!1),this.pauseSound())},this.handleSnowOnOff=e=>{e.target.checked?(this.controllerTree.changeSnowSettings(!0),this.turnOnSnow()):(this.controllerTree.changeSnowSettings(!1),this.turnOffSnow())},this.handleClickTrash=()=>{this.controllerTree.clearTreeSettings(),this.pauseSound(),document.getElementById("sound").checked=!1;const e=document.getElementById("snow");e.checked&&this.turnOffSnow(),e.checked=!1,document.querySelector(".tree-settings__item_is_active").classList.remove("tree-settings__item_is_active"),document.querySelector(".tree-settings__item").classList.add("tree-settings__item_is_active"),document.querySelector(".bg-settings__item_is_active").classList.remove("bg-settings__item_is_active"),document.querySelector(".bg-settings__item").classList.add("bg-settings__item_is_active"),this.changeTree("1"),this.changeBg("1")},this.handleChoiceOfTree=e=>{const t=e.target.closest(".tree-settings__item");if(!t)return;if(t.classList.contains("tree-settings__item_is_active"))return;document.querySelector(".tree-settings__item_is_active").classList.remove("tree-settings__item_is_active"),t.classList.add("tree-settings__item_is_active");const r=t.dataset.tree;this.controllerTree.changeActiveTree(r),this.changeTree(r)},this.handleChoiceOfBg=e=>{const t=e.target.closest(".bg-settings__item");if(!t)return;if(t.classList.contains("bg-settings__item_is_active"))return;document.querySelector(".bg-settings__item_is_active").classList.remove("bg-settings__item_is_active"),t.classList.add("bg-settings__item_is_active");const r=t.dataset.bg;this.controllerTree.changeActiveBg(r),this.changeBg(r)},this.handleChangeSettingsGarland=e=>{const t=e.target,r=document.querySelector(".garland-settings__checkbox"),n=document.querySelector(".tree__garland");"radio"==t.type?r.checked&&this.showGarland():"checkbox"==t.type&&(t.checked?this.showGarland():n.innerHTML="")},this.handleResizeWindow=()=>{const e=document.querySelector(".tree__snowflakes");null===e?window.removeEventListener("resize",this.handleResizeWindow):(this.snowContainerWidth=e.offsetWidth,this.snowContainerHeight=e.offsetHeight,this.addOrChangeImgMap());const t=document.querySelector(".garland-settings__checkbox");null!==t&&t.checked&&this.showGarland();const r=document.querySelectorAll("area img");if(null!==r&&r.length>0){const{widthTree:e,heightTree:t}=this.getSizeTree(),n=this.getCoords(".tree__tree-container"),o=this.getCoords(".tree__main-tree");for(let i=0;i<r.length;i+=1){r[i].style.width=e/100*12+"px",r[i].style.height=r[i].style.width;let s=+r[i].dataset.perx,a=+r[i].dataset.pery;r[i].style.left=o.left-n.left+s*e+"px",r[i].style.top=o.top-n.top+a*t+"px"}}},this.createSnowflake=()=>{const e=document.querySelector(".tree__snowflakes"),t=document.createElement("i");t.className="bi bi-snow2 tree__snowflakes-item",t.style.left=Math.random()*this.snowContainerWidth+"px",t.style.animationDuration=3*Math.random()+4+"s",t.style.fontSize=10*Math.random()+10+"px",e.style.setProperty("--bottom",this.snowContainerHeight+50+"px"),e.append(t),setTimeout((()=>{try{t.remove()}catch(e){}}),7e3)},this.handleDrop=e=>{e.preventDefault();const t=e.target;if("IMG"==t.nodeName)return;const r=t.closest("area"),n=e.dataTransfer.getData("idToy"),o=document.getElementById(n);o.parentElement.removeChild(o);const{widthTree:i,heightTree:s}=this.getSizeTree();o.style.width=i/100*12+"px",o.style.height=o.style.width;const a=this.getCoords(".tree__tree-container");o.style.left=e.pageX-a.left+"px",o.style.top=e.pageY-a.top+"px";const l=this.getCoords(".tree__main-tree");let c=e.pageX-l.left;c/=i;let h=e.pageY-l.top;h/=s,o.dataset.perx=c.toString(),o.dataset.pery=h.toString(),r.appendChild(o),this.showNumberToys(o.dataset.imgnum)},this.handleDragStart=e=>{const t=e.target;e.dataTransfer.setData("idToy",t.id)},this.handleOverDrop=e=>{e.preventDefault()},this.handleWindowDragEnd=e=>{const t=e.target;if(t.classList.contains("decor-toys__toy-img")&&"AREA"==t.parentNode.nodeName&&"none"==e.dataTransfer.dropEffect){t.parentElement.removeChild(t);const e=t.dataset.imgnum,r=document.querySelector(`.decor-toys__container [data-num='${e}']`);t.style.top="50%",t.style.left="50%",t.style.width="auto",t.style.height="auto",r.prepend(t),this.showNumberToys(e)}},this.controllerTree=t,this.rootElem=r,this.audio=new Audio("./public/audio/audio.mp3"),this.audio.loop=!0,this.map=e,window.addEventListener("dragend",this.handleWindowDragEnd)}showPage(){return e=this,t=void 0,n=function*(){const e=yield fetch("./public/pages/tree-page.html"),t=yield e.text();this.rootElem.innerHTML=t,document.querySelector("body").className="tree-page",this.initSettings(),this.initTreesForChoice(),this.initBgForChoice(),this.addListenersForGarlands(),this.initTreeContainer(),this.initToys(),this.initReadyTrees(),this.showNumberChosenToys()},new((r=void 0)||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}initSettings(){const e=document.getElementById("sound");this.controllerTree.getSoundSettings()&&(e.checked=!0,this.playSound()),e.addEventListener("change",this.handleSoundOnOff),document.querySelector(".tree-controls__btn").addEventListener("click",this.handleClickTrash)}playSound(){this.audio.currentTime=0,this.audio.play().catch((()=>{window.addEventListener("click",this.handleClickWindow)}))}pauseSound(){this.audio.pause()}initTreesForChoice(){const e=document.querySelector(".tree-settings__container"),t=this.controllerTree.getActiveTreeNumber();e.innerHTML="";for(let r=1;r<=6;r+=1){const n=document.createElement("div");n.className=+t==r?"tree-settings__item tree-settings__item_is_active":"tree-settings__item",n.dataset.tree=r.toString(),n.style.backgroundImage=`url('./public/tree/${r}.webp')`,e.append(n)}e.addEventListener("click",this.handleChoiceOfTree)}changeTree(e){document.querySelector(".tree__main-tree").src=`./public/tree/${e}.webp`}initBgForChoice(){const e=document.querySelector(".bg-settings__container"),t=this.controllerTree.getActiveBgNumber();e.innerHTML="";for(let r=1;r<=10;r+=1){const n=document.createElement("div");n.className=+t==r?"bg-settings__item bg-settings__item_is_active":"bg-settings__item",n.dataset.bg=r.toString(),n.style.backgroundImage=`url('./public/bg/${r}.webp')`,e.append(n)}e.addEventListener("click",this.handleChoiceOfBg)}changeBg(e){document.querySelector(".tree__tree-container").style.backgroundImage=`url('./public/bg/${e}.webp')`}addListenersForGarlands(){document.querySelector(".garland-settings__container").addEventListener("change",this.handleChangeSettingsGarland)}initTreeContainer(){const e=document.querySelector(".tree__tree-container"),t=this.controllerTree.getActiveBg();e.style.backgroundImage=`url('./public/bg/${t}.webp')`;const r=this.controllerTree.getActiveTreeNumber(),n=document.createElement("img");n.src=`./public/tree/${r}.webp`,n.alt="tree",n.className="tree__main-tree",n.useMap="#tree-map",n.onload=this.handleResizeWindow,e.append(n);const o=document.createElement("div");o.className="tree__garland",e.append(o);const i=document.createElement("div");i.className="tree__snowflakes",e.append(i),window.addEventListener("resize",this.handleResizeWindow),this.snowContainerWidth=i.offsetWidth,this.snowContainerHeight=i.offsetHeight,this.addOrChangeImgMap();const s=document.getElementById("snow");this.controllerTree.getSnowSettings()&&(s.checked=!0,this.turnOnSnow()),s.addEventListener("change",this.handleSnowOnOff)}addOrChangeImgMap(){const e=document.querySelector("map"),t=[],r=document.querySelector(".tree__tree-container");let{widthTree:n,heightTree:o}=this.getSizeTree();const i=document.createElement("area");i.shape="poly";for(let e=0;e<this.map.length;e+=1){let r=Math.round(n*this.map[e].x/500);t.push(r);let i=Math.round(o*this.map[e].y/714);t.push(i)}if(i.coords=t.join(","),null===e){const e=document.createElement("map");e.name="tree-map",e.append(i),r.append(e),i.addEventListener("dragover",this.handleOverDrop),i.ondrop=this.handleDrop}else document.querySelector("area").coords=i.coords}initToys(){const e=document.querySelector(".decor-toys__container");let t=this.controllerTree.getToysToPrint();for(let r=0;r<t.length;r+=1){let n=t[r].num,o=t[r].count,i=document.createElement("div");i.className="decor-toys__toy",i.dataset.num=n;for(let e=+o;e>=1;e-=1){let t=document.createElement("img");t.className="decor-toys__toy-img",t.src=`./public/toys/${n}.webp`,t.alt="toy",t.id=`${n}-${e}`,t.draggable=!0,t.dataset.imgnum=n,i.append(t),t.addEventListener("dragstart",this.handleDragStart)}let s=document.createElement("span");s.className="decor-toys__number-toys",s.textContent=o,i.append(s),e.append(i)}}initReadyTrees(){const e=document.querySelector(".decor-trees__container");e.innerHTML="";for(let t=1;t<=6;t+=1){const r=document.createElement("div");r.className="decor-trees__tree",r.dataset.tree=t.toString(),r.style.backgroundImage=`url('./public/tree/${t}.webp')`,e.append(r)}}turnOnSnow(){const e=document.querySelector(".tree__snowflakes");e.classList.contains("tree__snowflakes_is_hiding")&&e.classList.remove("tree__snowflakes_is_hiding"),this.timerSnow=setInterval(this.createSnowflake,50)}turnOffSnow(){clearInterval(this.timerSnow);const e=document.querySelector(".tree__snowflakes");e.classList.add("tree__snowflakes_is_hiding"),e.innerHTML=""}showGarland(){const e=document.querySelector(".tree__garland");e.innerHTML="";let t,r=document.querySelector(".garland-settings__radio:checked").id,{heightTree:n}=this.getSizeTree();t=n/9;for(let o=1;o<=8;o+=1){const i=document.createElement("ul");i.className="tree__garland-lightrope",i.style.bottom=20+t*o+"px";const s=2*(n-t*o),a=s/2;i.style.width=s+"px",i.style.height=s+"px";const l=document.createElement("li");l.className=`tree__garland-lightrope-item tree__garland-lightrope-item_is_${"rainbow"===r?this.getRandomColor():r}`,l.style.transform=`rotate(90deg) translate(${s/2+"px"})`,i.append(l);let c=90,h=5400/(2*Math.PI*a),u=c+h,d=c-h;for(;u<=107.5;){const e=document.createElement("li");e.className=`tree__garland-lightrope-item tree__garland-lightrope-item_is_${"rainbow"===r?this.getRandomColor():r}`,e.style.transform=`rotate(${u+"deg"}) translate(${s/2+"px"})`,i.append(e);const t=document.createElement("li");t.className=`tree__garland-lightrope-item tree__garland-lightrope-item_is_${"rainbow"===r?this.getRandomColor():r}`,t.style.transform=`rotate(${d+"deg"}) translate(${s/2+"px"})`,i.append(t),u+=h,d-=h}e.append(i)}}getSizeTree(){let e,t;return this.snowContainerWidth>=625?(e=500,t=714):(e=this.snowContainerWidth/100*80,t=714*e/500),{widthTree:e,heightTree:t}}getRandomColor(){let e="";switch(Math.floor(4*Math.random())+1){case 1:e="red";break;case 2:e="blue";break;case 3:e="green";break;case 4:e="yellow"}return e}showNumberToys(e){const t=document.querySelector(`.decor-toys__container [data-num = '${e}']`),r=t.querySelectorAll("img").length;t.querySelector(".decor-toys__number-toys").textContent=r.toString()}getCoords(e){const t=document.querySelector(e).getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}showNumberChosenToys(){document.querySelector(".header__favorite-toys").textContent=this.controllerTree.getNumberChosenToys().toString()}}class u{constructor(){this.rootElem=document.querySelector(".content__container"),document.querySelector(".menu__link-logo").addEventListener("click",(e=>{e.preventDefault(),window.location.hash="",this.controller.router.handleHashChange()}))}init(e,t,r){this.controller=e,this.viewToys=new c(t,this.rootElem),this.viewTree=new h(r,this.rootElem)}goToMainPage(){return e=this,t=void 0,n=function*(){const e=yield fetch("./public/pages/main-page.html"),t=yield e.text();this.rootElem.innerHTML=t,document.querySelector("body").className=""},new((r=void 0)||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}goToToysPage(e,t){this.viewToys.showPage(e,t).catch((e=>{console.log(e)}))}goToTreePage(){this.viewTree.showPage().catch((e=>{console.log(e)}))}}class d{constructor(e,t,r){this.name=e,this.htmlName=t,this.defaultRoute=r}isActiveRoute(e){return e.replace("#","")===this.name}}class m{constructor(e,t,r){this.handleHashChange=()=>{if(window.location.hash.length>0)for(let e=0;e<this.routes.length;e+=1){const t=this.routes[e];t.isActiveRoute(window.location.hash.slice(1))&&this.goToRoute(t.htmlName)}else for(let e=0;e<this.routes.length;e+=1){const t=this.routes[e];t.defaultRoute&&this.goToRoute(t.htmlName)}},this.model=e,this.view=t,this.routes=r}init(){window.addEventListener("hashchange",this.handleHashChange),this.handleHashChange()}goToRoute(e){var t,r;switch(e){case"main-page.html":null===(t=this.view.viewTree)||void 0===t||t.audio.pause(),this.clearTimer(),this.view.goToMainPage().catch((e=>{console.log(e)}));break;case"toys-page.html":null===(r=this.view.viewTree)||void 0===r||r.audio.pause(),this.clearTimer(),this.view.goToToysPage(this.model.getFilterData(),this.model.getChosenToys());break;case"tree-page.html":this.view.goToTreePage()}}clearTimer(){clearInterval(this.view.viewTree.timerSnow)}}class p{constructor(e,t){this.model=e,this.view=t}handleClickOnToy(e){var t,r;if(this.model.isToyChosen(e)){this.model.removeToyFromChosen(e);const r=this.model.getChosenToys().length;return null===(t=this.view.viewToys)||void 0===t||t.showNumChosenToys(r),n.Remove}if(this.model.getNumberChosenToys()>=20)return n.Error;this.model.addToyToChosen(e);const o=this.model.getChosenToys().length;return null===(r=this.view.viewToys)||void 0===r||r.showNumChosenToys(o),n.Add}getRangeCountSlider(){return this.model.getRangeCountSlider()}getRangeYearSlider(){return this.model.getRangeYearSlider()}updateValuesCountSlider(e){this.model.updateValuesCountSlider(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}updateValuesYearSlider(e){this.model.updateValuesYearSlider(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}getFilterCheckboxSettings(){return this.model.getFilterSettings()}getOnlyFavoritesCheckboxSettings(){return this.model.getOnlyFavoritesSettings()}getSortValue(){return this.model.getSortValue()}getSearchValue(){return this.model.getSearchValue()}updateValueFormCheckbox(e){this.model.updateValueFormFilter(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}updateValueColorCheckbox(e){this.model.updateValueColorFilter(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}updateValueSizeCheckbox(e){this.model.updateValueSizeFilter(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}updateValueOnlyFavorites(e){this.model.updateValueOnlyFavorites(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}handleInputSearch(e){this.model.changeInputSearch(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}handleChangeSortSelectValue(e){this.model.changeSortValue(e),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}handleClearFilters(){this.model.clearFilters(),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}handleClearSettings(){this.model.clearSettings(),this.view.viewToys.showToys(this.model.getFilterData(),this.model.getChosenToys())}getNumberChosenToys(){return this.model.getNumberChosenToys()}}class g{constructor(e,t){this.model=e,this.view=t}getSoundSettings(){return this.model.getSoundSettings()}changeSoundSettings(e){this.model.changeSoundSettings(e)}getSnowSettings(){return this.model.getSnowSettings()}changeSnowSettings(e){this.model.changeSnowSettings(e)}clearTreeSettings(){this.model.clearTreeSettings()}getActiveTreeNumber(){return this.model.getActiveTreeNumber()}changeActiveTree(e){this.model.changeActiveTree(e)}getActiveBgNumber(){return this.model.getActiveBgNumber()}changeActiveBg(e){this.model.changeActiveBg(e)}getActiveBg(){return this.model.getActiveBg()}getToysToPrint(){return this.model.getToysToPrint()}getNumberChosenToys(){return this.model.getNumberChosenToys()}}class f{constructor(e,t){this.model=e,this.view=t,this.router=new m(e,t,[new d("","main-page.html",!0),new d("toys","toys-page.html",!1),new d("tree","tree-page.html",!1)]),this.controllerToys=new p(e,t),this.controllerTree=new g(e,t)}initRouter(){this.router.init()}}(new class{constructor(){this.model=new a,this.view=new u,this.controller=new f(this.model,this.view),this.view.init(this.controller,this.controller.controllerToys,this.controller.controllerTree)}start(){console.log('Здравствуйте!\n-------------------------------------------------------------\n  Моя самооценка:\n\n  1. Вёрстка страниц приложения и навигация между ними (+30)\n    ☑ стартовая страница содержит название приложения и кнопку "Начать игру" или аналогичную. Выполняются требования к вёрстке (+10)\n    ☑ на странице с ёлкой есть меню с настройками, слоты с добавленными в избранное игрушками, ёлка. Выполняются требования к вёрстке (+10)\n    ☑ в header приложения есть навигация, которая позволяет с каждой страницы приложения перейти на две другие страницы (+10)\n\n  2. Меню с настройками (+50)\n    У пользователя есть возможность:\n    ☑ выбрать один из нескольких (минимум 8) фонов (+10)\n    ☑ выбрать одну из нескольких (минимум 4) ёлок (+10)\n    ☑ включить/отключить падающий снег (+10)\n    ☑ включить/отключить новогоднюю музыку (+10)\n    ☑ выбранные настройки сохраняются в local storage и отображаются при перезагрузке страницы. Если музыка сохранилась включённой, она начинает играть при первом клике. Есть кнопка сброса настроек, которая очищает local storage (+10)\n\n  3. Гирлянда (+40)\n    Гирлянда реализуется средствами css без использования изображений\n    Гирлянда на ёлку добавляется динамически средствами JavaScript (на кросс-чеке этот пункт не проверяется)\n    У пользователя есть возможность: \n    ☑ добавить на ёлку мерцающую разноцветную гирлянду (+20)\n    ☑ выбрать один из нескольких (минимум 4) цветов лампочек гирлянды или оставить её разноцветной (+10)\n    ☑ внешний вид гирлянды соответствует предложенному образцу или является его улучшенной версией (+10)\n\n  4. Игрушки в избранном (+80)\n    ☑ в слотах находятся игрушки, которые были добавлены в избранное на странице с игрушками (+10)\n    ☑ если в избранное не была добавлена ни одна игрушка, в слотах отображаются первые 20 игрушек коллекции исходных данных (+10)\n    ☑ игрушки из слотов с игрушками можно перетянуть на ёлку используя drag and drop (+10)\n    ☑ если в процессе перетягивания игрушку отпускают за пределами ёлки, она возвращается в свой слот (+10)\n    ☑ повешенные на ёлку игрушки можно перетягивать в пределах ёлки (+10)\n    ☑ повешенные на ёлку игрушки можно снимать с ёлки, при этом они возвращаются в свой слот (+10)\n    ☑ возле слота с каждой игрушкой указывается количество игрушек в слоте равное количеству экземпляров игрушки в массиве с исходными данными (+10)\n    ☑ когда игрушку "вешают на ёлку" количество игрушек в слоте уменьшается, когда игрушку "снимают с ёлки", количество игрушек в слоте увеличивается, когда все экземпляры игрушки помещаются на ёлку, отображается пустой слот (+10)\n\n  5. Дополнительный функционал на выбор - пока нет +0\n    ☑ \n\n  Итого: 200 баллов\n-------------------------------------------------------------\n  '),this.controller.initRouter()}turnOffPreloader(){const e=document.querySelector(".preloader");e.addEventListener("transitionend",(function t(){e.style.display="none",e.classList.remove("preloader_is-hiding"),e.removeEventListener("transitionend",t)})),e.classList.add("preloader_is-hiding")}}).start()})()})();
//# sourceMappingURL=main.js.map